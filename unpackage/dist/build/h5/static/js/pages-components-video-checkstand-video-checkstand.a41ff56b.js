(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-components-video-checkstand-video-checkstand"],{"3b94":function(e,a,t){"use strict";t.r(a);var i=t("b7ab"),s=t.n(i);for(var n in i)"default"!==n&&function(e){t.d(a,e,(function(){return i[e]}))}(n);a["default"]=s.a},"58ab":function(e,a,t){"use strict";var i,s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",[t("v-uni-view",{staticClass:"pay"},[t("v-uni-text",[e._v("需要支付")]),t("v-uni-text",{staticStyle:{color:"#f00"}},[e._v("￥"+e._s(e.add))])],1),e.userPay.discount_num?t("v-uni-view",{staticClass:"pay",staticStyle:{"margin-top":"30rpx"}},[t("v-uni-text",[e._v("折扣")]),t("v-uni-text",{staticStyle:{color:"#f00"}},[e._v("￥"+e._s(e.userPay.discount_num))])],1):e._e(),t("v-uni-view",{staticClass:"pay-box"},[t("v-uni-view",{staticClass:"pay-item"},[t("v-uni-text",[e._v("现金券：￥"+e._s(e.res.n_money))]),t("v-uni-input",{staticStyle:{"text-align":"right"},attrs:{type:"number",placeholder:"请输入使用额度","placeholder-style":"color:#ccc"},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.money(a)}},model:{value:e.cash,callback:function(a){e.cash=a},expression:"cash"}})],1),t("v-uni-view",{staticClass:"pay-item"},[t("v-uni-text",[e._v("余额：￥"+e._s(e.res.balance))]),t("v-uni-input",{staticStyle:{"text-align":"right"},attrs:{type:"number",placeholder:"请输入使用余额","placeholder-style":"color:#ccc"},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.changeBalance(a)}},model:{value:e.balance,callback:function(a){e.balance=a},expression:"balance"}})],1)],1),t("v-uni-view",{staticClass:"way"},[t("v-uni-view",{staticClass:"title"},[e._v("选择支付方式")]),t("v-uni-view",{staticClass:"item"},[t("v-uni-view",[t("v-uni-image",{attrs:{src:"/static/images/payment.png",mode:""}}),t("v-uni-text",[e._v("余额支付")])],1),t("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{color:"#FED940",checked:e.balanceWay},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleBalance.apply(void 0,arguments)}}})],1),t("v-uni-view",{staticClass:"item"},[t("v-uni-view",[t("v-uni-image",{attrs:{src:"/static/images/wx-pay.png",mode:""}}),t("v-uni-text",[e._v("微信支付")])],1),t("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{color:"#FED940",checked:e.payWay},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handlePayWay.apply(void 0,arguments)}}})],1)],1),e.passwordWin?t("v-uni-view",{staticClass:"pay-item"},[t("v-uni-input",{attrs:{type:"password",placeholder:"请输入支付密码","placeholder-style":"color: #C0C0C0"},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.getUserPassword.apply(void 0,arguments)}}})],1):e._e(),t("v-uni-view",{staticClass:"btn",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleOrder.apply(void 0,arguments)}}},[t("v-uni-button",{staticStyle:{"font-size":"30rpx",background:"#FED940",color:"#fff"}},[e._v("支付")])],1)],1)},n=[];t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return i}))},"863a":function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-a2c4fe20]{background:#f3f3f3}.pay[data-v-a2c4fe20]{box-sizing:border-box;line-height:%?70?%;padding:0 %?30?%;font-size:%?28?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff}.way[data-v-a2c4fe20]{margin-top:%?80?%;font-size:%?28?%}.way .title[data-v-a2c4fe20]{line-height:%?90?%;padding:0 %?30?%;border-bottom:1px solid #f1f1f1;background:#fff}.way .item[data-v-a2c4fe20]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;line-height:%?90?%;padding:0 %?30?%;background:#fff;border-bottom:1px solid #f1f1f1}.way .item uni-view[data-v-a2c4fe20]{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.way .item uni-view uni-image[data-v-a2c4fe20]{width:%?40?%;height:%?40?%;margin-right:%?12?%}.way .item uni-view uni-text[data-v-a2c4fe20]{font-size:%?28?%}.pay-item[data-v-a2c4fe20]{box-sizing:border-box;padding:%?30?%;border-bottom:1px solid #e5e5e5;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:%?28?%;color:#000;background:#fff}.btn[data-v-a2c4fe20]{box-sizing:border-box;position:fixed;bottom:0;left:0;width:100%}.pay-box[data-v-a2c4fe20]{box-sizing:border-box}.pay-box .pay-item[data-v-a2c4fe20]{box-sizing:border-box;margin-top:%?24?%;line-height:%?70?%;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;padding:0 %?30?%}body.?%PAGE?%[data-v-a2c4fe20]{background:#f3f3f3}',""]),e.exports=a},9623:function(e,a,t){"use strict";t.r(a);var i=t("58ab"),s=t("3b94");for(var n in s)"default"!==n&&function(e){t.d(a,e,(function(){return s[e]}))}(n);t("ad1f");var o,c=t("f0c5"),r=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,"a2c4fe20",null,!1,i["a"],o);a["default"]=r.exports},ad1f:function(e,a,t){"use strict";var i=t("efde"),s=t.n(i);s.a},b7ab:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("a481"),t("c5f6");var i=t("0708"),s={data:function(){return{goods_id:"",mobile:"",userPay:{},cash:"",balance:"",passwordWin:!1,payWay:!0,balanceWay:!1,res:{},add:"",userPassword:""}},onLoad:function(e){this.getUserMoney(),this.goods_id=e.id,this.mobile=e.mobile,this.getUserPay()},methods:{getUserMoney:function(){var e=this;(0,i.request)({url:"index.php?s=/wap/member/getMomeyInfo"}).then((function(a){e.res=a.data.data,console.log(e.res)}))},getUserPay:function(){var e=this;(0,i.request)({url:"index.php?s=/wap/media/buyMediaGoodsPay",method:"post",data:{mobile:this.mobile,goods_id:this.goods_id}}).then((function(a){e.userPay=a.data,e.add=parseFloat(a.data.price),console.log(e.userPay)}))},money:function(e){var a=this;if(this.passwordWin=!(!e.detail.value&&!this.balance),this.cash=parseInt(e.detail.value)||0,0==this.res.n_money||!this.res.n_money)return setTimeout((function(){a.cash=0}),50),void uni.showToast({title:"现金券为零",icon:"none"});this.cash=parseInt(e.detail.value)||0;var t=parseFloat(this.userPay.price),i=parseFloat(this.res.n_money),s=this.cash+(parseInt(this.balance)?parseInt(this.balance):0);""==this.balance?i<t?this.cash>i?setTimeout((function(){a.cash=i,a.add=(t-a.cash).toFixed(2)}),50):this.add=(t-this.cash).toFixed(2):this.cash>t?(setTimeout((function(){a.cash=t}),50),this.add=0):this.add=(t-this.cash).toFixed(2):""!=this.balance&&(i>t?s>=t?this.cash<t?(setTimeout((function(){a.balance=(t-a.cash).toFixed(2)}),50),this.add=0):(setTimeout((function(){a.cash=t,a.balance=0}),50),this.add=0):this.add=(t-this.balance-this.cash).toFixed(2):s>=t&&this.cash>i?setTimeout((function(){a.cash=i,a.add=(t-a.balance-i).toFixed(2)}),50):this.add=(t-this.balance-this.cash).toFixed(2))},changeBalance:function(e){var a=this;this.passwordWin=!(!e.detail.value&&!this.cash),this.balance=parseInt(e.detail.value)||0;var t=parseFloat(this.userPay.price),i=parseFloat(this.res.balance);this.balance,parseInt(this.cash)&&parseInt(this.cash);this.cash==t&&setTimeout((function(){a.balance=0}),50),""==this.cash||0==this.cash?i&&i>=t?this.balance>t?(setTimeout((function(){a.balance=t}),50),this.add=0):this.add=(t-this.balance).toFixed(2):this.balance>i?setTimeout((function(){a.balance=i,a.add=(t-a.balance).toFixed(2)}),50):this.add=(t-this.balance).toFixed(2):i&&i>=t?this.balance>t-this.cash?(setTimeout((function(){a.balance=t-a.cash})),this.add=0):this.add=(t-this.balance-this.cash).toFixed(2):this.balance>i?setTimeout((function(){a.balance=i,a.add=(t-a.balance-a.cash).toFixed(2)}),50):this.add=(t-this.balance-this.cash).toFixed(2)},handleBalance:function(){if(this.balanceWay=!this.balanceWay,this.payWay=!this.balanceWay,this.balanceWay)if(this.passwordWin=!0,parseInt(this.res.balance)>parseInt(this.userPay.price))this.cash?this.balance=(this.userPay.price-this.cash).toFixed(2):this.balance=this.userPay.price,this.add=0;else if(this.res.balance<this.userPay.price&&this.res.balance)if(this.cash)if(Number(this.balance)+Number(this.cash)>this.userPay.price)this.balance=(this.userPay.price-this.cash).toFixed(2),this.add=0;else{var e=this.cash||0;this.add=(this.userPay.price-this.balance-e).toFixed(2)}else 0!=parseInt(this.res.balance)&&(this.balance=this.res.balance)},handlePayWay:function(){this.payWay=!this.payWay,this.balanceWay=!this.payWay,this.payWay&&(this.balance="",this.cash&&this.balance?this.add=(this.userPay.price-this.cash-this.balance).toFixed(2):this.cash?this.add=(this.userPay.price-this.cash).toFixed(2):this.balance?this.add=(this.userPay.price-this.balance).toFixed(2):this.add=this.userPay.price)},getUserPassword:function(e){this.userPassword=e.detail.value.replace(/\s+/g,"")},handleOrder:function(){var e=this;if(console.log("handleOrder"),this.cash||this.balance){if(""==this.userPassword)return void uni.showToast({title:"请输入支付密码",icon:"none"});(0,i.request)({url:"index.php?s=/wap/member/checkPayPass",method:"post",data:{paypass:this.userPassword}}).then((function(a){a.data.code<0?uni.showModal({title:a.data.msg,content:"是否前往设置支付密码？",success:function(e){e.confirm&&uni.navigateTo({url:"/pages/components/setPayPassword/setPayPassword"})}}):(uni.showToast({title:"数据加载中",icon:"none"}),(0,i.request)({url:"index.php?s=/wap/media/createOrderForMedia",method:"post",data:{n_money:e.cash?e.cash:0,balance:e.balance?e.balance:0,mobile:e.mobile?e.mobile:""}}).then((function(a){if(uni.hideToast(),console.log(a),console.log(a.data[0].code),a.data[0].code>0){var t=parseInt(e.balance)?parseInt(e.balance):0,i=parseInt(e.cash)?parseInt(e.cash):0;if(i+t>=parseInt(e.userPay.price))uni.navigateTo({url:"/pages/components/order/order?status=2"});else{var s=a,n=uni.getStorageSync("token")[0];if(console.log(n),""==n)uni.showToast({title:"请先登录",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/components/login/login"})}),500);else{var o=encodeURIComponent("https://admin.dxsc.vip/index.php?s=/wap/pay/ApiwchatPay&no="+s.data[0].order_no+"&token="+n),c="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7cffa961be69b86e&redirect_uri="+o+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";window.location.href=c}}}else uni.showToast({title:a.data.msg,icon:"none"})})))}))}else this.balance||this.cash||!this.payWay||(0,i.request)({url:"index.php?s=/wap/media/createOrderForMedia",method:"post",data:{n_money:this.cash?this.cash:0,balance:this.balance?this.balance:0,mobile:this.mobile?this.mobile:""}}).then((function(e){if(e.data[0].code>0){var a=e,t=uni.getStorageSync("token")[0];if(""==t)uni.showToast({title:"请先登录",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/components/login/login"})}),500);else{var i=encodeURIComponent("https://admin.dxsc.vip/index.php?s=/wap/pay/ApiwchatPay&no="+a.data[0].order_no+"&token="+t),s="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7cffa961be69b86e&redirect_uri="+i+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";window.location.href=s}}else uni.showToast({title:e.data.msg,icon:"none"})}))}}};a.default=s},efde:function(e,a,t){var i=t("863a");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=t("4f06").default;s("3aa3f912",i,!0,{sourceMap:!1,shadowMode:!1})}}]);